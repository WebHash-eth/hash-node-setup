import{G as C4,H as W4}from"./aagdeg7m.js";import{$a as Z,Ab as y,Fb as H,Hb as p,Na as D,Qb as E4,Ra as K4,Sa as F,Sb as k4,Ta as z,Ua as O4,Va as M,Ya as o,_a as A4,ab as G,bb as T,cb as i,db as A,fc as l4,gb as V,hb as Q4,jb as E,jc as u4,kb as l,kc as d4,lb as f,lc as J4,nb as g,nc as n,sb as P4,tb as j4,ub as v4}from"./nz4br084.js";function wq(q){let w=V(`0x${q.substring(4)}`).substring(26);return Q4(`0x${w}`)}function Xq({r:q,s:w,to:J="hex",v:Q,yParity:N}){let W=(()=>{if(N===0||N===1)return N;if(Q&&(Q===27n||Q===28n||Q>=35n))return Q%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),X=`0x${new W4.Signature(o(q),o(w)).toCompactHex()}${W===0?"1b":"1c"}`;if(J==="hex")return X;return M(X)}function R(q,w="hex"){let J=X4(q),Q=g(new Uint8Array(J.length));if(J.encode(Q),w==="hex")return G(Q.bytes);return Q.bytes}function X4(q){if(Array.isArray(q))return m4(q.map((w)=>X4(w)));return y4(q)}function m4(q){let w=q.reduce((N,W)=>N+W.length,0),J=Z4(w);return{length:(()=>{if(w<=55)return 1+w;return 1+J+w})(),encode(N){if(w<=55)N.pushByte(192+w);else if(N.pushByte(247+J),J===1)N.pushUint8(w);else if(J===2)N.pushUint16(w);else if(J===3)N.pushUint24(w);else N.pushUint32(w);for(let{encode:W}of q)W(N)}}}function y4(q){let w=typeof q==="string"?M(q):q,J=Z4(w.length);return{length:(()=>{if(w.length===1&&w[0]<128)return 1;if(w.length<=55)return 1+w.length;return 1+J+w.length})(),encode(N){if(w.length===1&&w[0]<128)N.pushBytes(w);else if(w.length<=55)N.pushByte(128+w.length),N.pushBytes(w);else{if(N.pushByte(183+J),J===1)N.pushUint8(w.length);else if(J===2)N.pushUint16(w.length);else if(J===3)N.pushUint24(w.length);else N.pushUint32(w.length);N.pushBytes(w)}}}}function Z4(q){if(q<256)return 1;if(q<65536)return 2;if(q<16777216)return 3;if(q<4294967296)return 4;throw new D("Length is too large.")}var $4=`\x19Ethereum Signed Message:
`;function Y4(q){let w=(()=>{if(typeof q==="string")return i(q);if(typeof q.raw==="string")return q.raw;return G(q.raw)})(),J=i(`${$4}${F(w)}`);return l([J,w])}function Aq(q,w){return V(Y4(q),w)}function u(q){let{kzg:w}=q,J=q.to??(typeof q.blobs[0]==="string"?"hex":"bytes"),Q=typeof q.blobs[0]==="string"?q.blobs.map((W)=>M(W)):q.blobs,N=[];for(let W of Q)N.push(Uint8Array.from(w.blobToKzgCommitment(W)));return J==="bytes"?N:N.map((W)=>G(W))}function d(q){let{kzg:w}=q,J=q.to??(typeof q.blobs[0]==="string"?"hex":"bytes"),Q=typeof q.blobs[0]==="string"?q.blobs.map((X)=>M(X)):q.blobs,N=typeof q.commitments[0]==="string"?q.commitments.map((X)=>M(X)):q.commitments,W=[];for(let X=0;X<Q.length;X++){let $=Q[X],Y=N[X];W.push(Uint8Array.from(w.computeBlobKzgProof($,Y)))}return J==="bytes"?W:W.map((X)=>G(X))}function U4(q,w){let J=w||"hex",Q=C4(K4(q,{strict:!1})?O4(q):q);if(J==="bytes")return Q;return Z(Q)}function S4(q){let{commitment:w,version:J=1}=q,Q=q.to??(typeof w==="string"?"hex":"bytes"),N=U4(w,"bytes");return N.set([J],0),Q==="bytes"?N:G(N)}function V4(q){let{commitments:w,version:J}=q,Q=q.to??(typeof w[0]==="string"?"hex":"bytes"),N=[];for(let W of w)N.push(S4({commitment:W,to:Q,version:J}));return N}var D4=32,G4=4096,M4=131072,r=761855;var m=1;class t extends D{constructor({maxSize:q,size:w}){super("Blob size is too large.",{metaMessages:[`Max: ${q} bytes`,`Given: ${w} bytes`],name:"BlobSizeTooLargeError"})}}class v extends D{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class a extends D{constructor({hash:q,size:w}){super(`Versioned hash "${q}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${w}`],name:"InvalidVersionedHashSizeError"})}}class s extends D{constructor({hash:q,version:w}){super(`Versioned hash "${q}" version is invalid.`,{metaMessages:[`Expected: ${m}`,`Received: ${w}`],name:"InvalidVersionedHashVersionError"})}}function R4(q){let w=q.to??(typeof q.data==="string"?"hex":"bytes"),J=typeof q.data==="string"?M(q.data):q.data,Q=F(J);if(!Q)throw new v;if(Q>r)throw new t({maxSize:r,size:Q});let N=[],W=!0,X=0;while(W){let $=g(new Uint8Array(M4)),Y=0;while(Y<G4){let C=J.slice(X,X+(D4-1));if($.pushByte(0),$.pushBytes(C),C.length<31){$.pushByte(128),W=!1;break}Y++,X+=31}N.push($)}return w==="bytes"?N.map(($)=>$.bytes):N.map(($)=>G($.bytes))}function F4(q){let{data:w,kzg:J,to:Q}=q,N=q.blobs??R4({data:w,to:Q}),W=q.commitments??u({blobs:N,kzg:J,to:Q}),X=q.proofs??d({blobs:N,commitments:W,kzg:J,to:Q}),$=[];for(let Y=0;Y<N.length;Y++)$.push({blob:N[Y],commitment:W[Y],proof:X[Y]});return $}function _4(q){let{authorizationList:w}=q;if(w)for(let J of w){let{contractAddress:Q,chainId:N}=J;if(!E(Q))throw new A({address:Q});if(N<0)throw new H({chainId:N})}c(q)}function f4(q){let{blobVersionedHashes:w}=q;if(w){if(w.length===0)throw new v;for(let J of w){let Q=F(J),N=A4(k4(J,0,1));if(Q!==32)throw new a({hash:J,size:Q});if(N!==m)throw new s({hash:J,version:N})}}c(q)}function c(q){let{chainId:w,maxPriorityFeePerGas:J,maxFeePerGas:Q,to:N}=q;if(w<=0)throw new H({chainId:w});if(N&&!E(N))throw new A({address:N});if(Q&&Q>y)throw new p({maxFeePerGas:Q});if(J&&Q&&J>Q)throw new E4({maxFeePerGas:Q,maxPriorityFeePerGas:J})}function I4(q){let{chainId:w,maxPriorityFeePerGas:J,gasPrice:Q,maxFeePerGas:N,to:W}=q;if(w<=0)throw new H({chainId:w});if(W&&!E(W))throw new A({address:W});if(J||N)throw new D("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(Q&&Q>y)throw new p({maxFeePerGas:Q})}function B4(q){let{chainId:w,maxPriorityFeePerGas:J,gasPrice:Q,maxFeePerGas:N,to:W}=q;if(W&&!E(W))throw new A({address:W});if(typeof w!=="undefined"&&w<=0)throw new H({chainId:w});if(J||N)throw new D("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(Q&&Q>y)throw new p({maxFeePerGas:Q})}function L4(q){if(q.type)return q.type;if(typeof q.authorizationList!=="undefined")return"eip7702";if(typeof q.blobs!=="undefined"||typeof q.blobVersionedHashes!=="undefined"||typeof q.maxFeePerBlobGas!=="undefined"||typeof q.sidecars!=="undefined")return"eip4844";if(typeof q.maxFeePerGas!=="undefined"||typeof q.maxPriorityFeePerGas!=="undefined")return"eip1559";if(typeof q.gasPrice!=="undefined"){if(typeof q.accessList!=="undefined")return"eip2930";return"legacy"}throw new j4({transaction:q})}function P(q){if(!q||q.length===0)return[];let w=[];for(let J=0;J<q.length;J++){let{address:Q,storageKeys:N}=q[J];for(let W=0;W<N.length;W++)if(N[W].length-2!==64)throw new v4({storageKey:N[W]});if(!E(Q,{strict:!1}))throw new A({address:Q});w.push([Q,N])}return w}function H4(q){if(!q||q.length===0)return[];let w=[];for(let J of q){let{contractAddress:Q,chainId:N,nonce:W,...X}=J;w.push([N?Z(N):"0x",Q,W?Z(W):"0x",...I({},X)])}return w}function xw(q,w){let J=L4(q);if(J==="eip1559")return n4(q,w);if(J==="eip2930")return o4(q,w);if(J==="eip4844")return c4(q,w);if(J==="eip7702")return p4(q,w);return i4(q,w)}function p4(q,w){let{authorizationList:J,chainId:Q,gas:N,nonce:W,to:X,value:$,maxFeePerGas:Y,maxPriorityFeePerGas:C,accessList:O,data:K}=q;_4(q);let U=P(O),S=H4(J);return f(["0x04",R([Z(Q),W?Z(W):"0x",C?Z(C):"0x",Y?Z(Y):"0x",N?Z(N):"0x",X??"0x",$?Z($):"0x",K??"0x",U,S,...I(q,w)])])}function c4(q,w){let{chainId:J,gas:Q,nonce:N,to:W,value:X,maxFeePerBlobGas:$,maxFeePerGas:Y,maxPriorityFeePerGas:C,accessList:O,data:K}=q;f4(q);let{blobVersionedHashes:U,sidecars:S}=q;if(q.blobs&&(typeof U==="undefined"||typeof S==="undefined")){let _=typeof q.blobs[0]==="string"?q.blobs:q.blobs.map((L)=>G(L)),b=q.kzg,j=u({blobs:_,kzg:b});if(typeof U==="undefined")U=V4({commitments:j});if(typeof S==="undefined"){let L=d({blobs:_,commitments:j,kzg:b});S=F4({blobs:_,commitments:j,proofs:L})}}let B=P(O),x=[Z(J),N?Z(N):"0x",C?Z(C):"0x",Y?Z(Y):"0x",Q?Z(Q):"0x",W??"0x",X?Z(X):"0x",K??"0x",B,$?Z($):"0x",U??[],...I(q,w)],k=[],h=[],N4=[];if(S)for(let _=0;_<S.length;_++){let{blob:b,commitment:j,proof:L}=S[_];k.push(b),h.push(j),N4.push(L)}return f(["0x03",S?R([x,k,h,N4]):R(x)])}function n4(q,w){let{chainId:J,gas:Q,nonce:N,to:W,value:X,maxFeePerGas:$,maxPriorityFeePerGas:Y,accessList:C,data:O}=q;c(q);let K=P(C),U=[Z(J),N?Z(N):"0x",Y?Z(Y):"0x",$?Z($):"0x",Q?Z(Q):"0x",W??"0x",X?Z(X):"0x",O??"0x",K,...I(q,w)];return f(["0x02",R(U)])}function o4(q,w){let{chainId:J,gas:Q,data:N,nonce:W,to:X,value:$,accessList:Y,gasPrice:C}=q;I4(q);let O=P(Y),K=[Z(J),W?Z(W):"0x",C?Z(C):"0x",Q?Z(Q):"0x",X??"0x",$?Z($):"0x",N??"0x",O,...I(q,w)];return f(["0x01",R(K)])}function i4(q,w){let{chainId:J=0,gas:Q,data:N,nonce:W,to:X,value:$,gasPrice:Y}=q;B4(q);let C=[W?Z(W):"0x",Y?Z(Y):"0x",Q?Z(Q):"0x",X??"0x",$?Z($):"0x",N??"0x"];if(w){let O=(()=>{if(w.v>=35n){if((w.v-35n)/2n>0)return w.v;return 27n+(w.v===35n?0n:1n)}if(J>0)return BigInt(J*2)+BigInt(35n+w.v-27n);let S=27n+(w.v===27n?0n:1n);if(w.v!==S)throw new P4({v:w.v});return S})(),K=z(w.r),U=z(w.s);C=[...C,Z(O),K==="0x00"?"0x":K,U==="0x00"?"0x":U]}else if(J>0)C=[...C,Z(J),"0x","0x"];return R(C)}function I(q,w){let J=w??q,{v:Q,yParity:N}=J;if(typeof J.r==="undefined")return[];if(typeof J.s==="undefined")return[];if(typeof Q==="undefined"&&typeof N==="undefined")return[];let W=z(J.r),X=z(J.s);return[(()=>{if(typeof N==="number")return N?Z(1):"0x";if(Q===0n)return"0x";if(Q===1n)return Z(1);return Q===27n?"0x":Z(1)})(),W==="0x00"?"0x":W,X==="0x00"?"0x":X]}class e extends D{constructor({domain:q}){super(`Invalid domain "${n(q)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class q4 extends D{constructor({primaryType:q,types:w}){super(`Invalid primary type \`${q}\` must be one of \`${JSON.stringify(Object.keys(w))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class w4 extends D{constructor({type:q}){super(`Struct type "${q}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function cw(q){let{domain:w={},message:J,primaryType:Q}=q,N={EIP712Domain:T4({domain:w}),...q.types};z4({domain:w,message:J,primaryType:Q,types:N});let W=["0x1901"];if(w)W.push(r4({domain:w,types:N}));if(Q!=="EIP712Domain")W.push(x4({data:J,primaryType:Q,types:N}));return V(l(W))}function r4({domain:q,types:w}){return x4({data:q,primaryType:"EIP712Domain",types:w})}function x4({data:q,primaryType:w,types:J}){let Q=h4({data:q,primaryType:w,types:J});return V(Q)}function h4({data:q,primaryType:w,types:J}){let Q=[{type:"bytes32"}],N=[t4({primaryType:w,types:J})];for(let W of J[w]){let[X,$]=g4({types:J,name:W.name,type:W.type,value:q[W.name]});Q.push(X),N.push($)}return J4(Q,N)}function t4({primaryType:q,types:w}){let J=Z(a4({primaryType:q,types:w}));return V(J)}function a4({primaryType:q,types:w}){let J="",Q=b4({primaryType:q,types:w});Q.delete(q);let N=[q,...Array.from(Q).sort()];for(let W of N)J+=`${W}(${w[W].map(({name:X,type:$})=>`${$} ${X}`).join(",")})`;return J}function b4({primaryType:q,types:w},J=new Set){let N=q.match(/^\w*/u)?.[0];if(J.has(N)||w[N]===void 0)return J;J.add(N);for(let W of w[N])b4({primaryType:W.type,types:w},J);return J}function g4({types:q,name:w,type:J,value:Q}){if(q[J]!==void 0)return[{type:"bytes32"},V(h4({data:Q,primaryType:J,types:q}))];if(J==="bytes")return Q=`0x${(Q.length%2?"0":"")+Q.slice(2)}`,[{type:"bytes32"},V(Q)];if(J==="string")return[{type:"bytes32"},V(Z(Q))];if(J.lastIndexOf("]")===J.length-1){let N=J.slice(0,J.lastIndexOf("[")),W=Q.map((X)=>g4({name:w,type:N,types:q,value:X}));return[{type:"bytes32"},V(J4(W.map(([X])=>X),W.map(([,X])=>X)))]}return[{type:J},Q]}function wJ(q){let{domain:w,message:J,primaryType:Q,types:N}=q,W=(Y,C)=>{let O={...C};for(let K of Y){let{name:U,type:S}=K;if(S==="address")O[U]=O[U].toLowerCase()}return O},X=(()=>{if(!N.EIP712Domain)return{};if(!w)return{};return W(N.EIP712Domain,w)})(),$=(()=>{if(Q==="EIP712Domain")return;return W(N[Q],J)})();return n({domain:X,message:$,primaryType:Q,types:N})}function z4(q){let{domain:w,message:J,primaryType:Q,types:N}=q,W=(X,$)=>{for(let Y of X){let{name:C,type:O}=Y,K=$[C],U=O.match(d4);if(U&&(typeof K==="number"||typeof K==="bigint")){let[x,k,h]=U;T(K,{signed:k==="int",size:Number.parseInt(h)/8})}if(O==="address"&&typeof K==="string"&&!E(K))throw new A({address:K});let S=O.match(u4);if(S){let[x,k]=S;if(k&&F(K)!==Number.parseInt(k))throw new l4({expectedSize:Number.parseInt(k),givenSize:F(K)})}let B=N[O];if(B)s4(O),W(B,K)}};if(N.EIP712Domain&&w){if(typeof w!=="object")throw new e({domain:w});W(N.EIP712Domain,w)}if(Q!=="EIP712Domain")if(N[Q])W(N[Q],J);else throw new q4({primaryType:Q,types:N})}function T4({domain:q}){return[typeof q?.name==="string"&&{name:"name",type:"string"},q?.version&&{name:"version",type:"string"},(typeof q?.chainId==="number"||typeof q?.chainId==="bigint")&&{name:"chainId",type:"uint256"},q?.verifyingContract&&{name:"verifyingContract",type:"address"},q?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function s4(q){if(q==="address"||q==="bool"||q==="string"||q.startsWith("bytes")||q.startsWith("uint")||q.startsWith("int"))throw new w4({type:q})}function $J(q){let{chainId:w,contractAddress:J,nonce:Q,to:N}=q,W=V(f(["0x05",R([w?T(w):"0x",J,Q?T(Q):"0x"])]));if(N==="bytes")return M(W);return W}
export{wq as o,Xq as p,R as q,$J as r,Aq as s,u as t,d as u,U4 as v,V4 as w,F4 as x,L4 as y,P as z,xw as A,I as B,wJ as C,z4 as D,T4 as E,cw as F};
